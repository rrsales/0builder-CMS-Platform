<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Honest News – Live WordPress Editor</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  body{margin:0;font-family:system-ui;background:#f1f5f9;color:#1f2937;height:100vh;display:flex;flex-direction:column;overflow:hidden}
  .header{background:white;padding:16px 24px;box-shadow:0 2px 10px rgba(0,0,0,0.1);display:flex;justify-content:space-between;align-items:center;font-size:1.4rem;font-weight:600}
  .main{flex:1;display:flex;overflow:hidden}
  .sidebar{width:300px;background:white;border-right:1px solid #e5e7eb;padding:20px;overflow-y:auto}
  .page-item{padding:16px;background:#f8fafc;border-radius:10px;margin:8px 0;cursor:pointer;transition:0.2s;font-weight:600}
  .page-item:hover{background:#e0e7ff}
  .page-item.active{background:#4338ca;color:white}
  .content{flex:1;padding:40px;overflow-y:auto;background:#fff}
  .block{margin:20px 0;padding:24px;background:#f8fafc;border:2px dashed #cbd5e1;border-radius:16px;position:relative}
  .block:hover{border-color:#4338ca}
  .block-tools{position:absolute;top:10px;right:10px;opacity:0;transition:0.2s}
  .block:hover .block-tools{opacity:1}
  .block-tools button{background:none;border:none;cursor:pointer;font-size:20px;margin:0 6px;color:#6366f1}
  input,textarea{width:100%;padding:14px;margin:8px 0;border-radius:10px;border:1px solid #d1d5db;background:white;font-size:16px}
  button{background:#4338ca;color:white;border:none;padding:14px 28px;border-radius:10px;cursor:pointer;font-weight:600;margin:10px 10px 10px 0}
  button:hover{background:#3730a3}
  .preview{margin-top:40px;padding:40px;background:white;border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,0.1)}
</style>
</head>
<body>

<div class="header">
  <div>Honest News – Live Editor</div>
  <div>
    <button onclick="saveAndPublish()">SAVE & GO LIVE</button>
    <a href="/" target="_blank" style="margin-left:20px;color:#4338ca;text-decoration:none">View Live Site →</a>
  </div>
</div>

<div class="main">
  <div class="sidebar">
    <h3>Pages</h3>
    <div id="pageList"></div>
    <button onclick="width:100%;padding:16px;background:#4338ca;color:white;margin-top:20px" onclick="newPage()">+ New Page</button>
  </div>

  <div class="content">
    <h2 id="pageTitle">Select a page</h2>
    <div id="blocks"></div>
    <div class="preview">
      <h3>Live Preview</h3>
      <div id="preview"></div>
    </div>
  </div>
</div>

<script>
const PASS = "jesus2025";
if(prompt("Password")!==PASS){alert("Wrong");location.reload()}

let pages = [
  {title:"Home",slug:"index",blocks:[
    {type:"heading",content:"Honest News Network"},
    {type:"paragraph",content:"Biblical truth. No compromise. Free podcast hosting for ministries."},
    {type:"button",text:"Start Free",url:"#"}
  ]},
  {title:"Podcast",slug:"podcast",blocks:[]},
  {title:"Shop",slug:"shop",blocks:[]}
];

let currentPage = pages[0];

function renderPages(){
  document.getElementById("pageList").innerHTML = pages.map((p,i)=>`
    <div class="page-item ${p===currentPage?"active":""}" onclick="currentPage=pages[${i}];renderEditor();">
      ${p.title}
    </div>
  `).join("");
}
function newPage(){
  const title = prompt("Page title?");
  if(title){
    pages.push({title,slug:title.toLowerCase().replace(/[^a-z0-9]/g,"-"),blocks:[]});
    currentPage = pages[pages.length-1];
    renderPages();
    renderEditor();
  }
}

function renderEditor(){
  document.getElementById("pageTitle").textContent = "Editing: " + currentPage.title;
  const container = document.getElementById("blocks");
  container.innerHTML = "";
  currentPage.blocks.forEach((b,i)=>{
    const div = document.createElement("div");
    div.className = "block";
    if(b.type==="heading") div.innerHTML = `<input value="${b.content}" onchange="currentPage.blocks[${i}].content=this.value;updatePreview()">`;
    if(b.type==="paragraph") div.innerHTML = `<textarea onchange="currentPage.blocks[${i}].content=this.value;updatePreview()">${b.content||""}</textarea>`;
    if(b.type==="image") div.innerHTML = `<input value="${b.content||""}" placeholder="Image URL" onchange="currentPage.blocks[${i}].content=this.value;updatePreview()">`;
    if(b.type==="youtube") div.innerHTML = `<input value="${b.content||""}" placeholder="YouTube ID" onchange="currentPage.blocks[${i}].content=this.value;updatePreview()">`;
    if(b.type==="button") div.innerHTML = `Text: <input value="${b.text||""}" onchange="currentPage.blocks[${i}].text=this.value"> URL: <input value="${b.url||'#'}" onchange="currentPage.blocks[${i}].url=this.value">`;

    const tools = document.createElement("div");
    tools.className = "block-tools";
    tools.innerHTML = `<button onclick="move(${i},-1)">↑</button><button onclick="move(${i},1)">↓</button><button onclick="del(${i})">×</button>`;
    div.appendChild(tools);
    container.appendChild(div);
  });
  updatePreview();
}

function add(type){
  if(!currentPage) return;
  const block = {type};
  if(type!=="image"&&type!=="youtube") block.content = "New " + type;
  if(type==="button") block.text="Click Me";
  currentPage.blocks.push(block);
  renderEditor();
}
function move(i,dir){
  const b = currentPage.blocks.splice(i,1)[0];
  currentPage.blocks.splice(i+dir,0,b);
  renderEditor();
}
function del(i){
  if(confirm("Delete block?")) {
    currentPage.blocks.splice(i,1);
    renderEditor();
  }
}

function updatePreview(){
  let html = "";
  currentPage.blocks.forEach(b=>{
    if(b.type==="heading") html += `<h2>${b.content}</h2>`;
    if(b.type==="paragraph") html += `<p>${b.content}</p>`;
    if(b.type==="image") html += `<img src="${b.content}" style="max-width:100%;border-radius:12px">`;
    if(b.type==="youtube") html += `<iframe src="https://www.youtube.com/embed/${b.content}" style="width:100%;height:500px" allowfullscreen></iframe>`;
    if(b.type==="button") html += `<a href="${b.url}" style="background:#4338ca;color:white;padding:16px 40px;border-radius:50px;display:inline-block;margin:20px 0">${b.text}</a>`;
  });
  document.getElementById("preview").innerHTML = html;
}

function saveAndPublish(){
  localStorage.setItem("hn_live_data",JSON.stringify({pages}));
  alert("SAVED! Your live site updated instantly.");
}

renderPages();
renderEditor();
</script>

<div style="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#4338ca;color:white;padding:16px 32px;border-radius:50px;font-weight:bold">
  + Heading  + Paragraph  + Image  + YouTube  + Button
  <div style="margin-top:8px;font-size:12px">Click above buttons to add</div>
</div>

</body>
</html>

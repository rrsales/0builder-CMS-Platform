<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Honest News Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: system-ui, sans-serif; background: linear-gradient(135deg, #0066cc, #003366); height: 100vh; margin: 0; display: flex; align-items: center; justify-content: center; color: #333; }
    #loginBox { background: white; padding: 50px; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); text-align: center; width: 380px; }
    input, button { width: 100%; padding: 14px; margin: 10px 0; border-radius: 8px; border: none; font-size: 16px; }
    input { border: 2px solid #ddd; }
    button { background: #0066cc; color: white; cursor: pointer; font-weight: bold; }
    button:hover { background: #0052a3; }
    #msg { color: #c33; margin-top: 15px; min-height: 20px; }
    #dashboard { display: none; height: 100vh; background: white; color: #333; padding: 40px; overflow-y: auto; }
    .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
    .block { margin: 10px 0; padding: 15px; background: #f8f9fa; border-radius: 6px; position: relative; }
    .block-tools { position: absolute; top: 5px; right: 5px; opacity: 0; transition: opacity 0.2s; }
    .block:hover .block-tools { opacity: 1; }
    .block-tools button { background: #0066cc; color: white; border: none; padding: 4px 8px; margin-left: 4px; border-radius: 4px; cursor: pointer; font-size: 12px; }
    #preview { width: 100%; height: 400px; border: 1px solid #ddd; border-radius: 8px; margin-top: 20px; }
  </style>
</head>
<body>

<div id="loginBox">
  <h1 style="color: #0066cc; margin-bottom: 10px;">Honest News Admin</h1>
  <p style="color: #666; margin-bottom: 20px;">Enter password to access the editor</p>
  <input type="password" id="adminPassword" placeholder="Password">
  <button id="loginButton">Log In</button>
  <div id="errorMsg"></div>
</div>

<div id="dashboard">
  <h1>Welcome to the Site Editor!</h1>
  <p>This is your WordPress-like backend. Use the sections below to build pages.</p>

  <div class="section">
    <h2>Pages</h2>
    <button id="newPageBtn">+ New Page</button>
    <div id="pagesList"></div>
  </div>

  <div class="section" id="pageEditor" style="display: none;">
    <h2 id="editingPageTitle">Editing: Untitled</h2>
    <div id="blocksContainer"></div>
    <button id="addBlockBtn">+ Add Block (Heading/Paragraph/Image)</button>
    <iframe id="livePreview" src="about:blank"></iframe>
  </div>

  <div class="section">
    <h2>Hero Settings</h2>
    <select id="heroPageSelect"></select>
    <select id="heroType">
      <option value="none">No Hero</option>
      <option value="image">Image (Parallax)</option>
      <option value="video">Video</option>
    </select>
    <input type="text" id="heroMediaURL" placeholder="Image/Video URL">
    <div id="heroPreview" style="margin-top: 10px;"></div>
    <label><input type="checkbox" id="parallaxEffect"> Enable Parallax</label>
    <button id="saveHeroBtn">Save Hero</button>
  </div>

  <button id="saveAllBtn" style="width: 100%; padding: 15px; background: #28a745; color: white; font-size: 18px; margin-top: 20px;">Save All Changes</button>
  <button id="logoutBtn" style="width: 100%; padding: 15px; background: #dc3545; color: white; margin-top: 10px;">Logout</button>
</div>

<script>
  // Password: admin2025
  const ADMIN_PASSWORD = 'admin2025';

  // Data storage
  let siteData = JSON.parse(localStorage.getItem('honestNewsAdmin') || '{"pages":[{"id":"home","title":"Home","blocks":[]}],"heroes":{}}');

  // Login
  document.getElementById('loginButton').addEventListener('click', () => {
    const password = document.getElementById('adminPassword').value;
    if (password === ADMIN_PASSWORD) {
      document.getElementById('loginBox').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
      loadData();
    } else {
      document.getElementById('errorMsg').textContent = 'Incorrect password. Try: admin2025';
    }
  });

  function loadData() {
    renderPages();
    renderHeroSelect();
    updateLivePreview();
  }

  function saveData() {
    localStorage.setItem('honestNewsAdmin', JSON.stringify(siteData));
    alert('All changes saved!');
  }

  // Pages
  document.getElementById('newPageBtn').addEventListener('click', () => {
    const title = prompt('Page title?');
    if (title) {
      const id = Date.now().toString(36);
      siteData.pages.push({ id, title, blocks: [] });
      saveData();
      renderPages();
    }
  });

  function renderPages() {
    const list = document.getElementById('pagesList');
    list.innerHTML = '';
    siteData.pages.forEach(page => {
      const div = document.createElement('div');
      div.innerHTML = `<strong>${page.title}</strong> <button onclick="editPage('${page.id}')">Edit</button> <button onclick="deletePage('${page.id}')">Delete</button>`;
      list.appendChild(div);
    });
  }

  function editPage(id) {
    const page = siteData.pages.find(p => p.id === id);
    document.getElementById('editingPageTitle').textContent = `Editing: ${page.title}`;
    document.getElementById('pageEditor').style.display = 'block';
    renderBlocks(page.blocks);
    currentEditingPage = page;
    updateLivePreview();
  }

  function deletePage(id) {
    if (confirm('Delete this page?')) {
      siteData.pages = siteData.pages.filter(p => p.id !== id);
      saveData();
      renderPages();
    }
  }

  let currentEditingPage = null;

  // Blocks
  document.getElementById('addBlockBtn').addEventListener('click', () => {
    const type = prompt('Block type: heading, paragraph, image');
    if (type && currentEditingPage) {
      currentEditingPage.blocks.push({ type, content: '' });
      renderBlocks(currentEditingPage.blocks);
      saveData();
      updateLivePreview();
    }
  });

  function renderBlocks(blocks) {
    const container = document.getElementById('blocksContainer');
    container.innerHTML = '';
    blocks.forEach((block, index) => {
      const div = document.createElement('div');
      div.className = 'block';
      if (block.type === 'heading') div.innerHTML = `<h2 contenteditable="true">${block.content || 'New Heading'}</h2>`;
      if (block.type === 'paragraph') div.innerHTML = `<p contenteditable="true">${block.content || 'New Paragraph'}</p>`;
      if (block.type === 'image') div.innerHTML = `<img src="${block.content}" style="max-width:100%; display:block;"> <input type="text" placeholder="Image URL" value="${block.content}" onchange="updateBlockContent(${index}, this.value)">`;
      div.querySelectorAll('[contenteditable]').forEach(el => {
        el.addEventListener('blur', () => {
          block.content = el.innerText;
          saveData();
          updateLivePreview();
        });
      });
      const tools = document.createElement('div');
      tools.className = 'block-tools';
      tools.innerHTML = `<button onclick="moveBlock(${index}, -1)">↑</button><button onclick="moveBlock(${index}, 1)">↓</button><button onclick="deleteBlock(${index})">×</button>`;
      div.appendChild(tools);
      container.appendChild(div);
    });
  }

  function moveBlock(index, direction) {
    if (currentEditingPage) {
      const block = currentEditingPage.blocks.splice(index, 1)[0];
      currentEditingPage.blocks.splice(index + direction, 0, block);
      renderBlocks(currentEditingPage.blocks);
      saveData();
      updateLivePreview();
    }
  }

  function deleteBlock(index) {
    if (confirm('Delete block?') && currentEditingPage) {
      currentEditingPage.blocks.splice(index, 1);
      renderBlocks(currentEditingPage.blocks);
      saveData();
      updateLivePreview();
    }
  }

  function updateBlockContent(index, content) {
    if (currentEditingPage) {
      currentEditingPage.blocks[index].content = content;
      saveData();
      updateLivePreview();
    }
  }

  // Hero
  function renderHeroSelect() {
    const select = document.getElementById('heroPageSelect');
    select.innerHTML = '';
    siteData.pages.forEach(page => {
      const option = document.createElement('option');
      option.value = page.id;
      option.textContent = page.title;
      select.appendChild(option);
    });
  }

  document.getElementById('saveHeroBtn').addEventListener('click', () => {
    const pageId = document.getElementById('heroPageSelect').value;
    const type = document.getElementById('heroType').value;
    const url = document.getElementById('heroMediaURL').value;
    siteData.heroes[pageId] = { type, url, parallax: document.getElementById('parallaxEffect').checked };
    if (type === 'image') {
      document.getElementById('heroPreview').innerHTML = `<img src="${url}" style="max-width:100%; border-radius:8px;">`;
    } else if (type === 'video') {
      document.getElementById('heroPreview').innerHTML = `<video src="${url}" controls style="max-width:100%; border-radius:8px;"></video>`;
    }
    saveData();
    updateLivePreview();
  });

  // Live Preview
  function updateLivePreview() {
    if (!currentEditingPage) return;
    const hero = siteData.heroes[currentEditingPage.id] || { type: 'none' };
    let html = '<html><head><style>body{margin:0;font-family:sans-serif;background:#fff;} .parallax{background-attachment:fixed;}</style></head><body>';
    if (hero.type === 'image') {
      html += `<div class="parallax" style="height:60vh;background:url(${hero.url}) center/cover; display:flex;align-items:center;justify-content:center;color:white;"><h1 style="text-shadow:0 0 20px #000;">${currentEditingPage.title}</h1></div>`;
    }
    currentEditingPage.blocks.forEach(block => {
      if (block.type === 'heading') html += `<h2 style="text-align:center;padding:40px;">${block.content}</h2>`;
      if (block.type === 'paragraph') html += `<p style="max-width:800px;margin:40px auto;">${block.content}</p>`;
      if (block.type === 'image') html += `<img src="${block.content}" style="max-width:100%; display:block;margin:40px auto;">`;
    });
    html += '</body></html>';
    const blob = new Blob([html], { type: 'text/html' });
    document.getElementById('livePreview').src = URL.createObjectURL(blob);
  }

  // Global Save & Logout
  document.getElementById('saveAllBtn').addEventListener('click', saveData);
  document.getElementById('logoutBtn').addEventListener('click', () => location.reload());

  // Auto-save on changes
  document.addEventListener('input', () => { if (currentEditingPage) saveData(); });
</script>

</body>
</html>















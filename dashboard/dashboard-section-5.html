/* =========================================
   SECTION 5: NAVIGATION TEXTAREA (LEFT)
   ========================================= */

function rawFromMenu(){
  const ta = document.getElementById("menuRaw");
  if(!ta || !site) return;

  const menuArr = Array.isArray(site.menu) ? site.menu : [];
  ta.value = menuArr
    .map(m => `${m.label || m.title || "Item"} | ${m.url || "#"}`)
    .join("\n");
}

function menuFromRaw(text){
  if (!site) site = {};
  const lines = (text || "")
    .split(/\r?\n/)
    .map(l => l.trim())
    .filter(Boolean);

  site.menu = lines.map((l,idx)=>{
    const parts = l.split("|");
    const title = (parts[0] || "").trim() || "Item";
    const url   = (parts[1] || "").trim() || "#";
    return {
      id: title.toLowerCase().replace(/\s+/g,"-") || "item-"+idx,
      label: title,
      url: url,
      type:"link",
      showOn:"both",
      subItems:[]
    };
  });

  markDirty();
}
